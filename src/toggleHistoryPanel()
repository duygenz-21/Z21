async function toggleHistoryPanel() {
    const panel = document.getElementById('historyPanel');
    const listContainer = document.getElementById('historyList');
    
    if (!panel || !listContainer) return;

    // Kiểm tra trạng thái hiển thị dựa trên class Tailwind
    const isVisible = !panel.classList.contains('-translate-x-full');

    if (isVisible) {
        // Đang hiện -> Ẩn đi
        panel.classList.add('-translate-x-full');
        panel.classList.remove('translate-x-0');
    } else {
        // Đang ẩn -> Hiện ra
        panel.classList.remove('-translate-x-full');
        panel.classList.add('translate-x-0');
        
        // Load dữ liệu mới nhất
        listContainer.innerHTML = '<div class="text-center text-slate-500 mt-4"><i class="fas fa-spinner fa-spin"></i> Đang tải dữ liệu...</div>';
        await renderHistoryList(listContainer);
    }
}
